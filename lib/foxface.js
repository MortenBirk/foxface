!function(n,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.foxface=r():n.foxface=r()}(window,(function(){return function(n){var r={};function t(e){if(r[e])return r[e].exports;var u=r[e]={i:e,l:!1,exports:{}};return n[e].call(u.exports,u,u.exports,t),u.l=!0,u.exports}return t.m=n,t.c=r,t.d=function(n,r,e){t.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:e})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,r){if(1&r&&(n=t(n)),8&r)return n;if(4&r&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(t.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&r&&"string"!=typeof n)for(var u in n)t.d(e,u,function(r){return n[r]}.bind(null,u));return e},t.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(r,"a",r),r},t.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},t.p="",t(t.s=0)}([function(n,r,t){"use strict";t.r(r);var e=function(n,r){for(var t=r.shape.map((function(){return 0})),e=!0;e;){n(r.get(t),r.getBufferIdx(t),t);for(var u=r.shape.length-1;t[u]+=1,t[u]>=r.shape[u];){0===u&&(e=!1);for(var o=u;o<r.shape.length;o++)t[o]=0;u-=1}}},u=function(n,r){return(r=r.copy()).forEach((function(t,e,u){return r.data[e]=n(t,e,u)})),r};function o(n){return function(n){if(Array.isArray(n)){for(var r=0,t=new Array(n.length);r<n.length;r++)t[r]=n[r];return t}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=function(n,r){return r(n.dtype.from(n.values()),{dtype:n.dtype,shape:o(n.shape)})},i=function(n,r,t){return t(n.from(r.values()),{dtype:n,shape:o(r.shape)})},f=function(n){var r=[];return n.forEach((function(n){return r.push(n)})),r},c=function(n){if(1===n.shape.length)return n.values();var r=[];return n.forEach((function(n,t,e){var u=r;e.forEach((function(n,r){r!==e.length-1&&(u[n]||(u[n]=[]),u=u[n])})),u[e[e.length-1]]=n})),r},s=function(n){return l(0,n)},h=function(n){return l(1,n)},l=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.dtype,e=void 0===t?Float64Array:t,u=r.shape,o=void 0===u?null:u;if(null===o)throw new TypeError("A shape option must be specified");var a=o.reduce((function(n,r){return n*r}),1),i=e.from({length:a},(function(){return n}));return G(i,{shape:o})},p=function(n){return l(0,{dtype:n.dtype,shape:n.shape.slice()})},d=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r<0&&(r+=n.shape.length);var t=n.sum(r);return t instanceof V?(t.div(n.shape[r],!0),t):t/n.length},y=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=function(n){var r=n.sort((function(n,r){return n-r})),t=Math.floor(r.length/2);return r.length%2?r[t]:(r[t-1]+r[t])/2};if(null!=r){r<0&&(r+=n.shape.length);var e={};return n.forEach((function(n,t,u){var o=u.filter((function(n,t){return t!==r}))+"";e[o]?e[o].push(n):e[o]=[n]})),G(Object.values(e).map((function(n){return t(n)})),{dtype:n.dtype,shape:n.shape.filter((function(n,t){return t!==r}))})}return t(n.values())},v=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=n.avg(r);if(null!=r){r<0&&(r+=n.shape.length);var e=n.shape.map((function(n){return[]}));e[r]=0;for(var u=p(n.get(e)),o=0;o<n.shape[r];o++)e[r]=o,u.add(n.get(e).sub(t).pow(2),!0);return u.div(n.shape[r],!0),u}return n.sub(t).pow(2).avg()},g=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=n.variance(r);return t instanceof V?t.map((function(n){return Math.sqrt(n)})):Math.sqrt(t)},m=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=r){r<0&&(r+=n.shape.length);var t=n.shape.map((function(n){return[]}));t[r]=0;for(var e=p(n.get(t)),u=0;u<n.shape[r];u++)t[r]=u,e.add(n.get(t),!0);return e}return n.values().reduce((function(n,r){return n+r}),0)},b=function(n){return n.values().reduce((function(n,r){return r<n?r:n}),Number.POSITIVE_INFINITY)},w=function(n){return n.values().reduce((function(n,r){return r>n?r:n}),Number.NEGATIVE_INFINITY)},A=function(n,r,t){if(!t)return"number"==typeof r?n.map((function(n){return n+r})):n.map((function(n,t,e){return n+r.data[r.getBufferIdx(e)]}));"number"!=typeof r?n.forEach((function(t,e,u){return n.data[e]=t+r.data[r.getBufferIdx(u)]})):n.forEach((function(t,e,u){return n.data[e]=t+r}))},E=function(n,r,t){if(!t)return"number"==typeof r?n.map((function(n){return n-r})):n.map((function(n,t,e){return n-r.data[r.getBufferIdx(e)]}));"number"!=typeof r?n.forEach((function(t,e,u){return n.data[e]=t-r.data[r.getBufferIdx(u)]})):n.forEach((function(t,e,u){return n.data[e]=t-r}))},I=function(n,r,t){if(!t)return"number"==typeof r?n.map((function(n){return n/r})):n.map((function(n,t,e){return n/r.data[r.getBufferIdx(e)]}));"number"!=typeof r?n.forEach((function(t,e,u){return n.data[e]=t/r.data[r.getBufferIdx(u)]})):n.forEach((function(t,e,u){return n.data[e]=t/r}))},x=function(n,r,t){if(!t)return"number"==typeof r?n.map((function(n){return n*r})):n.map((function(n,t,e){return n*r.data[r.getBufferIdx(e)]}));"number"!=typeof r?n.forEach((function(t,e,u){return n.data[e]=t*r.data[r.getBufferIdx(u)]})):n.forEach((function(t,e,u){return n.data[e]=t*r}))},B=function(n,r,t){if(!t)return"number"==typeof r?n.map((function(n){return Math.pow(n,r)})):n.map((function(n,t,e){return Math.pow(n,r.data[r.getBufferIdx(e)])}));"number"!=typeof r?n.forEach((function(t,e,u){return n.data[e]=Math.pow(t,r.data[r.getBufferIdx(u)])})):n.forEach((function(t,e,u){return n.data[e]=Math.pow(t,r)}))},T=function(n,r){return"number"==typeof n?r.map((function(r){return r===n?1:0})):r.map((function(r,t,e){return r===n.data[n.getBufferIdx(e)]?1:0}))},j=function(n,r){return"number"==typeof n?r.map((function(r){return r!==n?1:0})):r.map((function(r,t,e){return r!==n.data[n.getBufferIdx(e)]?1:0}))},O=function(n,r){return"number"==typeof n?r.map((function(r){return r>n?1:0})):r.map((function(r,t,e){return r>n.data[n.getBufferIdx(e)]?1:0}))},M=function(n,r){return"number"==typeof n?r.map((function(r){return r>=n?1:0})):r.map((function(r,t,e){return r>=n.data[n.getBufferIdx(e)]?1:0}))},S=function(n,r){return"number"==typeof n?r.map((function(r){return r<n?1:0})):r.map((function(r,t,e){return r<n.data[n.getBufferIdx(e)]?1:0}))},N=function(n,r){return"number"==typeof n?r.map((function(r){return r<=n?1:0})):r.map((function(r,t,e){return r<=n.data[n.getBufferIdx(e)]?1:0}))};function _(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function P(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}var F=function(n){for(var r=[];r.push(n.length),Array.isArray(n[0]);)n=n[0];return r},q=function(n){if(1===n.length)return[1];for(var r=[],t=n;;)if((t=t.filter((function(n,r){return r>0}))).length>1&&r.push(t.reduce((function(n,r){return n*r}),1)),1===t.length){r.push(t[0]),r.push(1);break}return r},R=function n(r){return Array.isArray(r[0])?r.reduce((function(r,t){return r.concat(n(t))}),[]):r},U=[Array,Float32Array,Float64Array,Int8Array,Int16Array,Int32Array,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array],k=function(n){var r=!0,t=!1,e=void 0;try{for(var u,o=U[Symbol.iterator]();!(r=(u=o.next()).done);r=!0){var a=u.value;if(n instanceof a)return a}}catch(n){t=!0,e=n}finally{try{r||null==o.return||o.return()}finally{if(t)throw e}}},z=function(n,r){!function(n,r){if(n.length>r.shape.length)throw new RangeError("Index out of range");n.forEach((function(n,t){if(Array.isArray(n))n.forEach((function(n){if(n>r.shape[t])throw new RangeError("Index out of range")}));else if(n>=r.shape[t])throw new RangeError("Index out of range")}))}(n=function(n,r){return n.length<r.shape.length?r.shape.map((function(r,t){return t<n.length?n[t]:[]})):n}(n=function(n,r){return n.map((function(n,t){return Array.isArray(n)?n.map((function(n){return n<0?n+r.shape[t]:n})):n<0?n+r.shape[t]:n}))}(n,r),r),r);var t=!1;return n.forEach((function(n){Array.isArray(n)&&(t=!0)})),t?function(n,r){var t=n.map((function(n,t){if(Array.isArray(n)){if(0===n.length)return r.shape[t];if(2!==n.length)throw new TypeError("Indices must be a range of two numbers, or an empty array");return n[1]-n[0]}return null})).filter((function(n){return null!==n})),e=n.map((function(n,t){return Array.isArray(n)?r.strides[t]:null})).filter((function(n){return null!==n})),u=n.map((function(n){return Array.isArray(n)?0===n.length?0:n[0]:n})).reduce((function(n,t,e){return n+t*r.strides[e]}),0);return Y(null,{source:r,shape:t,offset:r.offset+u,strides:e})}(n,r):r.getBufferIdx(n,r)},C=function(n,r){var t=[];return n.forEach((function(n,e,u){n&&t.push(r.get(u))})),Y(r.dtype.from(t))},L=function(n,r,t){r.forEach((function(r,e,u){r&&t.set(u,n)}))},V=function n(r){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_(this,n),P(this,"set",(function(r,e){if(r instanceof n)L(e,r,t);else{var u=e;"function"!=typeof e&&(u=function(){return e});var o=z(r,t);Number.isInteger(o)?t.data[o]=u(t.data[o]):o.forEach((function(n,r){return t.data[r]=u(t.data[r])}))}})),P(this,"get",(function(r){if(r instanceof n)return C(r,t);var e=z(r,t);return Number.isInteger(e)?t.data[e]:e})),P(this,"getBufferIdx",(function(n){var r=n.map((function(n,r){return n*t.strides[r]}));return t.offset+r.reduce((function(n,r){return r+n}),0)})),P(this,"forEach",(function(n){return e(n,t)})),P(this,"map",(function(n){return u(n,t)})),P(this,"values",(function(){return f(t)})),P(this,"toList",(function(){return c(t)})),P(this,"copy",(function(){return a(t,Y)})),P(this,"asType",(function(n){return i(n,t,Y)})),P(this,"avg",(function(n){return d(t,n)})),P(this,"median",(function(n){return y(t,n)})),P(this,"variance",(function(n){return v(t,n)})),P(this,"std",(function(n){return g(t,n)})),P(this,"sum",(function(n){return m(t,n)})),P(this,"min",(function(){return b(t)})),P(this,"max",(function(){return w(t)})),P(this,"add",(function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return A(t,n,r)})),P(this,"sub",(function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return E(t,n,r)})),P(this,"div",(function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return I(t,n,r)})),P(this,"mul",(function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return x(t,n,r)})),P(this,"pow",(function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return B(t,n,r)})),P(this,"eq",(function(n){return T(n,t)})),P(this,"neq",(function(n){return j(n,t)})),P(this,"lt",(function(n){return S(n,t)})),P(this,"gt",(function(n){return O(n,t)})),P(this,"le",(function(n){return N(n,t)})),P(this,"ge",(function(n){return M(n,t)}));var s=o.dtype,h=void 0===s?null:s,l=o.source,p=void 0===l?null:l,U=o.shape,V=void 0===U?null:U,G=o.offset,D=void 0===G?null:G,H=o.strides,J=void 0===H?null:H;if(r){var K=k(r),Q=K===Array?R(r):r;if(V&&Q.length!==V.reduce((function(n,r){return n*r}),1))throw new RangeError("Invalid shape provided for the given data");return this.dtype=h||K,Q=this.dtype.from(Q),this.shape=V||F(r),this.length=this.shape.reduce((function(n,r){return r*n}),1),this.strides=q(this.shape),this.offset=0,void(this.data=Q)}if(p&&V&&J)return this.shape=V,this.length=this.shape.reduce((function(n,r){return r*n}),1),this.offset=D||0,this.strides=J,this.data=p.data,void(this.dtype=h||p.dtype);throw new TypeError("shape and strides must be provided when a view is selected with a source")},Y=function(n,r){return new V(n,r)},G=Y;function D(n){return function(n){if(Array.isArray(n)){for(var r=0,t=new Array(n.length);r<n.length;r++)t[r]=n[r];return t}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var H=function(n,r){if(!Array.isArray(n))throw new TypeError("ndarrays must be a list of ndarrays");var t=null,e=null;if(n.forEach((function(n){if(!(n instanceof V))throw new TypeError("ndarrays must be a list of ndarrays");if(null!==t&&t!==n.dtype)throw new TypeError("ndarrays must all have the same dtype");if(t=n.dtype,null!==e&&!function(n,r){if(n.length!==r.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==r[t])return!1;return!0}(e,n.shape))throw new TypeError("ndarrays must all have the same shape");e=D(n.shape)})),r>e.length)throw new TypeError("axis can not be larger than ".concat(e.length," for shape ").concat(e));if(r<-1)throw new TypeError("negative axis can only be -1 to indicate last dimension")},J=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;H(n,r);var t=n[0].dtype,e=D(n[0].shape);-1===r&&(r=e.length),r===e.length?e.push(n.length):e=e.reduce((function(t,e,u){return u===r&&t.push(n.length),t.push(e),t}),[]);var u=s({shape:e,dtype:t});return u=u.map((function(t,e,u){var o=n[u[r]],a=u.filter((function(n,t){return t!==r}));return o.get(a)}))};t.d(r,"zeros",(function(){return s})),t.d(r,"ones",(function(){return h})),t.d(r,"full",(function(){return l})),t.d(r,"zerosLike",(function(){return p})),t.d(r,"stack",(function(){return J})),t.d(r,"ndarray",(function(){return G}));r.default=G}])}));