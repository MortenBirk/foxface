!function(n,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.foxface=r():n.foxface=r()}(window,(function(){return function(n){var r={};function t(e){if(r[e])return r[e].exports;var u=r[e]={i:e,l:!1,exports:{}};return n[e].call(u.exports,u,u.exports,t),u.l=!0,u.exports}return t.m=n,t.c=r,t.d=function(n,r,e){t.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:e})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,r){if(1&r&&(n=t(n)),8&r)return n;if(4&r&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(t.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&r&&"string"!=typeof n)for(var u in n)t.d(e,u,function(r){return n[r]}.bind(null,u));return e},t.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(r,"a",r),r},t.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},t.p="",t(t.s=0)}([function(n,r,t){"use strict";t.r(r);var e=function(n,r){for(var t=r.shape.map((function(){return 0})),e=!0;e;){n(r.get(t),r.getBufferIdx(t),t);for(var u=r.shape.length-1;t[u]+=1,t[u]>=r.shape[u];){0===u&&(e=!1);for(var a=u;a<r.shape.length;a++)t[a]=0;u-=1}}},u=function(n,r){return(r=r.copy()).forEach((function(t,e,u){return r.data[e]=n(t,e,u)})),r};function a(n){return function(n){if(Array.isArray(n)){for(var r=0,t=new Array(n.length);r<n.length;r++)t[r]=n[r];return t}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=function(n,r){return r(n.dtype.from(n.values()),{dtype:n.dtype,shape:a(n.shape)})},i=function(n,r,t){return t(n.from(r.values()),{dtype:n,shape:a(r.shape)})},f=function(n){var r=[];return n.forEach((function(n){return r.push(n)})),r},c=function(n){if(1===n.shape.length)return n.values();var r=[];return n.forEach((function(n,t,e){var u=r;e.forEach((function(n,r){r!==e.length-1&&(u[n]||(u[n]=[]),u=u[n])})),u[e[e.length-1]]=n})),r},s=function(n){return l(0,n)},h=function(n){return l(1,n)},l=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.dtype,e=void 0===t?Float64Array:t,u=r.shape,a=void 0===u?null:u;if(null===a)throw new TypeError("A shape option must be specified");var o=a.reduce((function(n,r){return n*r}),1),i=e.from({length:o},(function(){return n}));return H(i,{shape:a})},p=function(n){return l(0,{dtype:n.dtype,shape:n.shape.slice()})},d=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r<0&&(r+=n.shape.length);var t=n.sum(r);return t instanceof G?(t.div(n.shape[r],!0),t):t/n.length},y=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=function(n){var r=n.sort((function(n,r){return n-r})),t=Math.floor(r.length/2);return r.length%2?r[t]:(r[t-1]+r[t])/2};if(null!=r){r<0&&(r+=n.shape.length);var e={};return n.forEach((function(n,t,u){var a=u.filter((function(n,t){return t!==r}))+"";e[a]?e[a].push(n):e[a]=[n]})),H(Object.values(e).map((function(n){return t(n)})),{dtype:n.dtype,shape:n.shape.filter((function(n,t){return t!==r}))})}return t(n.values())},v=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=n.avg(r);if(null!=r){r<0&&(r+=n.shape.length);var e=n.shape.map((function(n){return[]}));e[r]=0;for(var u=p(n.get(e)),a=0;a<n.shape[r];a++)e[r]=a,u.add(n.get(e).sub(t).pow(2),!0);return u.div(n.shape[r],!0),u}return n.sub(t).pow(2).avg(r)},g=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=n.variance(r);return t instanceof G?t.map((function(n){return Math.sqrt(n)})):Math.sqrt(t)},m=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=n.median(r);if(null!=r){r<0&&(r+=n.shape.length);var e=n.shape.map((function(n){return[]}));e[r]=0;var u=n.map((function(n,e,u){var a=u.filter((function(n,t){return t!==r}));return Math.abs(n-t.get(a))}));return u.median(r)}return n.sub(t).abs().median()},b=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=r){r<0&&(r+=n.shape.length);var t=n.shape.map((function(n){return[]}));t[r]=0;for(var e=p(n.get(t)),u=0;u<n.shape[r];u++)t[r]=u,e.add(n.get(t),!0);return e}return n.values().reduce((function(n,r){return n+r}),0)},w=function(n){return n.map((function(n){return Math.abs(n)}))},A=function(n){return n.values().reduce((function(n,r){return r<n?r:n}),Number.POSITIVE_INFINITY)},E=function(n){return n.values().reduce((function(n,r){return r>n?r:n}),Number.NEGATIVE_INFINITY)},I=function(n,r,t){if(!t)return"number"==typeof r?n.map((function(n){return n+r})):n.map((function(n,t,e){return n+r.data[r.getBufferIdx(e)]}));"number"!=typeof r?n.forEach((function(t,e,u){return n.data[e]=t+r.data[r.getBufferIdx(u)]})):n.forEach((function(t,e,u){return n.data[e]=t+r}))},x=function(n,r,t){if(!t)return"number"==typeof r?n.map((function(n){return n-r})):n.map((function(n,t,e){return n-r.data[r.getBufferIdx(e)]}));"number"!=typeof r?n.forEach((function(t,e,u){return n.data[e]=t-r.data[r.getBufferIdx(u)]})):n.forEach((function(t,e,u){return n.data[e]=t-r}))},B=function(n,r,t){if(!t)return"number"==typeof r?n.map((function(n){return n/r})):n.map((function(n,t,e){return n/r.data[r.getBufferIdx(e)]}));"number"!=typeof r?n.forEach((function(t,e,u){return n.data[e]=t/r.data[r.getBufferIdx(u)]})):n.forEach((function(t,e,u){return n.data[e]=t/r}))},T=function(n,r,t){if(!t)return"number"==typeof r?n.map((function(n){return n*r})):n.map((function(n,t,e){return n*r.data[r.getBufferIdx(e)]}));"number"!=typeof r?n.forEach((function(t,e,u){return n.data[e]=t*r.data[r.getBufferIdx(u)]})):n.forEach((function(t,e,u){return n.data[e]=t*r}))},j=function(n,r,t){if(!t)return"number"==typeof r?n.map((function(n){return Math.pow(n,r)})):n.map((function(n,t,e){return Math.pow(n,r.data[r.getBufferIdx(e)])}));"number"!=typeof r?n.forEach((function(t,e,u){return n.data[e]=Math.pow(t,r.data[r.getBufferIdx(u)])})):n.forEach((function(t,e,u){return n.data[e]=Math.pow(t,r)}))},O=function(n,r){return"number"==typeof n?r.map((function(r){return r===n?1:0})):r.map((function(r,t,e){return r===n.data[n.getBufferIdx(e)]?1:0}))},M=function(n,r){return"number"==typeof n?r.map((function(r){return r!==n?1:0})):r.map((function(r,t,e){return r!==n.data[n.getBufferIdx(e)]?1:0}))},S=function(n,r){return"number"==typeof n?r.map((function(r){return r>n?1:0})):r.map((function(r,t,e){return r>n.data[n.getBufferIdx(e)]?1:0}))},N=function(n,r){return"number"==typeof n?r.map((function(r){return r>=n?1:0})):r.map((function(r,t,e){return r>=n.data[n.getBufferIdx(e)]?1:0}))},_=function(n,r){return"number"==typeof n?r.map((function(r){return r<n?1:0})):r.map((function(r,t,e){return r<n.data[n.getBufferIdx(e)]?1:0}))},P=function(n,r){return"number"==typeof n?r.map((function(r){return r<=n?1:0})):r.map((function(r,t,e){return r<=n.data[n.getBufferIdx(e)]?1:0}))};function F(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function q(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}var R=function(n){for(var r=[];r.push(n.length),Array.isArray(n[0]);)n=n[0];return r},U=function(n){if(1===n.length)return[1];for(var r=[],t=n;;)if((t=t.filter((function(n,r){return r>0}))).length>1&&r.push(t.reduce((function(n,r){return n*r}),1)),1===t.length){r.push(t[0]),r.push(1);break}return r},k=function n(r){return Array.isArray(r[0])?r.reduce((function(r,t){return r.concat(n(t))}),[]):r},z=[Array,Float32Array,Float64Array,Int8Array,Int16Array,Int32Array,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array],C=function(n){var r=!0,t=!1,e=void 0;try{for(var u,a=z[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var o=u.value;if(n instanceof o)return o}}catch(n){t=!0,e=n}finally{try{r||null==a.return||a.return()}finally{if(t)throw e}}},L=function(n,r){!function(n,r){if(n.length>r.shape.length)throw new RangeError("Index out of range");n.forEach((function(n,t){if(Array.isArray(n))n.forEach((function(n){if(n>r.shape[t])throw new RangeError("Index out of range")}));else if(n>=r.shape[t])throw new RangeError("Index out of range")}))}(n=function(n,r){return n.length<r.shape.length?r.shape.map((function(r,t){return t<n.length?n[t]:[]})):n}(n=function(n,r){return n.map((function(n,t){return Array.isArray(n)?n.map((function(n){return n<0?n+r.shape[t]:n})):n<0?n+r.shape[t]:n}))}(n,r),r),r);var t=!1;return n.forEach((function(n){Array.isArray(n)&&(t=!0)})),t?function(n,r){var t=n.map((function(n,t){if(Array.isArray(n)){if(0===n.length)return r.shape[t];if(2!==n.length)throw new TypeError("Indices must be a range of two numbers, or an empty array");return n[1]-n[0]}return null})).filter((function(n){return null!==n})),e=n.map((function(n,t){return Array.isArray(n)?r.strides[t]:null})).filter((function(n){return null!==n})),u=n.map((function(n){return Array.isArray(n)?0===n.length?0:n[0]:n})).reduce((function(n,t,e){return n+t*r.strides[e]}),0);return D(null,{source:r,shape:t,offset:r.offset+u,strides:e})}(n,r):r.getBufferIdx(n,r)},V=function(n,r){var t=[];return n.forEach((function(n,e,u){n&&t.push(r.get(u))})),D(r.dtype.from(t))},Y=function(n,r,t){r.forEach((function(r,e,u){r&&t.set(u,n)}))},G=function n(r){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};F(this,n),q(this,"set",(function(r,e){if(r instanceof n)Y(e,r,t);else{var u=e;"function"!=typeof e&&(u=function(){return e});var a=L(r,t);Number.isInteger(a)?t.data[a]=u(t.data[a]):a.forEach((function(n,r){return t.data[r]=u(t.data[r])}))}})),q(this,"get",(function(r){if(r instanceof n)return V(r,t);var e=L(r,t);return Number.isInteger(e)?t.data[e]:e})),q(this,"getBufferIdx",(function(n){var r=n.map((function(n,r){return n*t.strides[r]}));return t.offset+r.reduce((function(n,r){return r+n}),0)})),q(this,"forEach",(function(n){return e(n,t)})),q(this,"map",(function(n){return u(n,t)})),q(this,"values",(function(){return f(t)})),q(this,"toList",(function(){return c(t)})),q(this,"copy",(function(){return o(t,D)})),q(this,"asType",(function(n){return i(n,t,D)})),q(this,"avg",(function(n){return d(t,n)})),q(this,"median",(function(n){return y(t,n)})),q(this,"variance",(function(n){return v(t,n)})),q(this,"std",(function(n){return g(t,n)})),q(this,"mad",(function(n){return m(t,n)})),q(this,"sum",(function(n){return b(t,n)})),q(this,"abs",(function(){return w(t)})),q(this,"min",(function(){return A(t)})),q(this,"max",(function(){return E(t)})),q(this,"add",(function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return I(t,n,r)})),q(this,"sub",(function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return x(t,n,r)})),q(this,"div",(function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return B(t,n,r)})),q(this,"mul",(function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return T(t,n,r)})),q(this,"pow",(function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return j(t,n,r)})),q(this,"eq",(function(n){return O(n,t)})),q(this,"neq",(function(n){return M(n,t)})),q(this,"lt",(function(n){return _(n,t)})),q(this,"gt",(function(n){return S(n,t)})),q(this,"le",(function(n){return P(n,t)})),q(this,"ge",(function(n){return N(n,t)}));var s=a.dtype,h=void 0===s?null:s,l=a.source,p=void 0===l?null:l,z=a.shape,G=void 0===z?null:z,H=a.offset,J=void 0===H?null:H,K=a.strides,Q=void 0===K?null:K;if(r){var W=C(r),X=W===Array?k(r):r;if(G&&X.length!==G.reduce((function(n,r){return n*r}),1))throw new RangeError("Invalid shape provided for the given data");return this.dtype=h||W,X=this.dtype.from(X),this.shape=G||R(r),this.length=this.shape.reduce((function(n,r){return r*n}),1),this.strides=U(this.shape),this.offset=0,void(this.data=X)}if(p&&G&&Q)return this.shape=G,this.length=this.shape.reduce((function(n,r){return r*n}),1),this.offset=J||0,this.strides=Q,this.data=p.data,void(this.dtype=h||p.dtype);throw new TypeError("shape and strides must be provided when a view is selected with a source")},D=function(n,r){return new G(n,r)},H=D;function J(n){return function(n){if(Array.isArray(n)){for(var r=0,t=new Array(n.length);r<n.length;r++)t[r]=n[r];return t}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var K=function(n,r){if(!Array.isArray(n))throw new TypeError("ndarrays must be a list of ndarrays");var t=null,e=null;if(n.forEach((function(n){if(!(n instanceof G))throw new TypeError("ndarrays must be a list of ndarrays");if(null!==t&&t!==n.dtype)throw new TypeError("ndarrays must all have the same dtype");if(t=n.dtype,null!==e&&!function(n,r){if(n.length!==r.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==r[t])return!1;return!0}(e,n.shape))throw new TypeError("ndarrays must all have the same shape");e=J(n.shape)})),r>e.length)throw new TypeError("axis can not be larger than ".concat(e.length," for shape ").concat(e));if(r<-1)throw new TypeError("negative axis can only be -1 to indicate last dimension")},Q=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;K(n,r);var t=n[0].dtype,e=J(n[0].shape);-1===r&&(r=e.length),r===e.length?e.push(n.length):e=e.reduce((function(t,e,u){return u===r&&t.push(n.length),t.push(e),t}),[]);var u=s({shape:e,dtype:t});return u=u.map((function(t,e,u){var a=n[u[r]],o=u.filter((function(n,t){return t!==r}));return a.get(o)}))};t.d(r,"zeros",(function(){return s})),t.d(r,"ones",(function(){return h})),t.d(r,"full",(function(){return l})),t.d(r,"zerosLike",(function(){return p})),t.d(r,"stack",(function(){return Q})),t.d(r,"ndarray",(function(){return H}));r.default=H}])}));